import BlackboardQuiz
from flask import send_file

# create a function where it takes video ids, search through the question base indexed by ID and turns it into a BB package
# question bank format
# question ={str(video id):['Module','Question',[choices],answer]}
questions = {'11478': [['DNA consists of how many polynucleotide chains?', ['1', '2', '3', '4'], 1], ['Which of the following compose a nucleotide?', ['Deoxyribose, nitrogen-containing base, and phosphate group', 'Ribose, nitrogen-containing base, and phosphate group', 'Deoxysucrose, nitrogen-containing base, and phosphate group', 'Sucrose, nitrogen-containing base, and phosphate group'], 0], ['What type of bond links the sugars in DNA?', ['Peptide bond', 'Glycosidic bond', 'Phosphodiester bond', 'Hydrogen bond'], 2]], '11479': [['When transcription is complete, the resulting molecule is a:', ['tRNA', 'Polypeptide', 'mRNA', 'Functional protein'], 2], ['If a DNA sequence is GCT, what is the complementary sequence in the mRNA?', ['GCT', 'CGT', 'CGA', 'TCG'], 2], ['A single codon specifies:', ['a complementary nucleotide', 'an amino acid', 'a mRNA', 'a gene'], 1]], '11480': [['In prokaryotes, chromosomal DNA is located in the:', ['Plasmid', 'Nucleoid', 'Nucleus', 'Inclusion'], 1], ['Which of the choices below lists the layers surrounding a prokaryotic cell in the correct order, from the cytoplasm to the extracellular environment?', ['Capsule, plasma membrane, cell wall', 'Plasma membrane, capsule, cell wall', 'Cell wall, plasma membrane, capsule', 'Plasma membrane, cell wall, capsule'], 3], ['Which is true about prokaryotes?', ['Their capsule consists of peptidoglycan.', 'They are all bacteria.', 'They can have intracellular micro-compartments with specialized functions.', 'Their DNA is single-stranded.'], 2]], '11481': [['Which feature of organelles allows them to have an internal chemical environment that differs from the cytoplasm?', ['Round shape', 'Surrounding membrane', 'Pores', 'Cytosol'], 1], ['Which organelle protects the cell by keeping harmful substances contained within them?', ['Lysosome', 'Ribosome', 'Peroxisome', 'Endoplasmic reticulum'], 2], ['Which is NOT an organelle?', ['Nucleus', 'Mitochondria', 'Vesicle', 'None of the above'], 3]], '11482': [['Historically, organisms, both extant and extinct, were placed on the tree based on...', ['...16S rRNA gene sequencing.', '...habitat.', '...phenotype.', '...color.'], 2], ['Haeckel proposed three kingdoms of life: plants, animals, and...', ['...prokaryotes.', '...protists.', '...fungi.', '...mammals.'], 1], ['Prokaryotic organisms, by definition, do <b><u>not</u></b><b> </b>possess which of the following?', ['A membrane-bound nucleus', 'Chloroplasts', 'A cell membrane', 'The 16S rRNA gene'], 0]], '11483': [['Which of the following statements about mutations is untrue?', ['Mutations may affect single bases, all the way up to large segments of chromosomes', 'Mutations are sometimes silent, and have no effect on the protein produced', 'Mutations can never have positive effects', 'Mutations can cause disease'], 2], ['What do nonsense mutations do?', ['They change a codon previously coding for an amino acid into a stop codon', 'They flip one codon backwards so that it codes for a different amino acid', 'They change every codon to its opposite, complementary sequence', 'They make a codon repeat multiple times in a row'], 0], ['What is the name of the mutation that alters the codon reading window so that it reads the triplicate codon code incorrectly?', ['Window-move mutation', 'Frame-shift mutation', 'Triplet-transfer mutation', 'Lateral-shunt mutation'], 1]], '11484': [['Which of the following statements are true?', ['The genomes of all organisms will evolve at the same rate', 'Typically, non-coding regions of a genome will accumulate mutations at a faster rate than coding regions', 'Typically, coding regions of a genome will accumulate mutations at a faster rate than non-coding regions', 'Mutations that occur in a coding region are always detrimental'], 1], ['Which of these is a gene commonly sequenced to elucidate evolutionary relationships at the species level, all the way up to kingdoms and beyond?', ['18 RNA-S gene', 'DNA-RNA polymerase 16', '16s rRNA gene', '18a RNA subunit'], 2], ['How many mutations does a 100bp DNA sequence accumulate in 1 million years?', ['One', 'Ten', 'Upwards of one hundred', 'Any of the above can be true; it will vary depending on factors such as species, whether the sequence is coding or non-coding, or the location in the genome'], 3]], '11485': [['Which one of the following statements is NOT true?', ['Prokaryotic genomes have little to no non-coding sequence', 'Eukaryotic genomes are typically smaller than those of prokaryotes', 'Smaller genomes can help with faster reproduction', 'One of the smallest known genomes is only 160 thousand base pairs'], 1], ['How many genes, on average, does a typical eukaryote have?', ['3,000', '500,000', '90,000', '20,000'], 3], ['Which term describes a process that brings in novel genes or genetic material from different individuals or species but does not involve sexual reproduction?', ['Horizontal gene transfer', 'Linear gene transfer', 'Vertical gene transfer', 'Passive gene transfer'], 0]], '11486': [['Gene families often arise through which evolutionary process?', ['Conjugation', 'Assortative mating', 'Horizontal gene transfer', 'Gene duplication'], 3], ['Which of these terms specifically describes genes which arose through the duplication of an existing gene, within the genome of a single species?', ['Duplogs', 'Orthologs', 'Paralogs', 'Omnilogs'], 2], ['Which of the following are two genes in the globin gene family which have related but different major functions?', ['Hemoglobin and omniglobin', 'Hemoglobin and myoglobin', 'Myoglobin and omniglobin', 'Omniglobin and Terraglobin'], 1]], '11487': [['What are the two types of genetic transfer?', ['Prokaryotic and eukaryotic', 'Vertical and horizontal', 'Horizontal and transduction', 'Conjugation and transformation'], 1], ['Vertical gene transfer occurs when genetic information is passed from...', ['...one species to another.', '...one organism to another of the same generation.', '...one generation of organisms to the next.', '...a bacterium to a virus.'], 2], ['Horizontal gene transfer occurs when genetic information is passed from...', ['...one organism to another of the same generation', '...one generation of organisms to the next', '...one generation to the previous generation of organisms.', '...archaea to bacteria'], 0]]}
def find_questions(video_ids):
    id_list=video_ids.split(',')

    with BlackboardQuiz.Package("MyQuestionPools") as package:        
        #You may have multiple question pools in a single package, just
        #repeat this block with different pool names.
        with package.createPool('Chapter1', description="Questions which are not generated/calculated", instructions="") as pool:
            for ids in id_list:
                if questions[ids]:
                    all_question = questions[ids]
                    for question in all_question:
                            pool.addMCQ(ids, question[0], question[1],
                                correct=question[2])
                # return str(questions[ids])
    return send_file("MyQuestionPools.zip",as_attachment=True)
        